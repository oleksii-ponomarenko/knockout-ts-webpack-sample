<layout id="testPage">
	<form class="form-inline" data-bind="visible: !!test()">
		<h1>Edit test</h1>
		<h2 class="clearfix">
			Title: 
			<input class="form-control jira-textbox" data-bind="value: test().name"></input>

			<div class="pull-right">
				<a id="saveTestBtn" class="btn btn-success" data-bind="visible: test().isChanged, click: saveTest">Save</a>
				<a id="addQuestionBtn" class="btn btn-default" data-bind="click: addQuestion">Add question</a>
			</div>
		</h1>

		<div class="well" data-bind="visible: !test().questions().length">
			<h2>No questions.</h2>
			<p>You can add it by clicking on <b>Add question</b> button in top-right corner.</p>
		</div>
		<ul class="unstyled-list" data-bind="sortable: { data: test().questions, as: 'question', afterMove: function(e, ui) { afterDropping(e.ei); },
		                                     options: { placeholder: 'sortable-placeholder', start: startDragging } }">
			<li>
				<editable-question params="question: question, removeQuestion: function(q) { $parent.removeQuestion(q); }"></editable-question>
			</li>
		</ul>
	</form>
	<div data-bind="visible: !test()">
		<h2>Cannot find such test.</h2>
		<p>This test was removed or never exists.</p>
	</div>
</layout>